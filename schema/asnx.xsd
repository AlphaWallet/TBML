<?xml version="1.0" encoding="utf-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
        xmlns:ethereum="urn:ethereum:constantinople"
        xmlns:asnx="urn:ietf:params:xml:ns:asnx"
        targetNamespace="urn:ietf:params:xml:ns:asnx"
        elementFormDefault="unqualified">

    <import namespace="urn:ethereum:constantinople"
            schemaLocation="ethereum.xsd"/>

    <element name="module">
        <complexType>
            <choice maxOccurs="unbounded">
                <element name="sequence" type="asnx:container"/>
                <element name="namedType" type="asnx:namedType"/>
            </choice>
            <attribute name="name" type="NCName"/>
        </complexType>
    </element>

    <complexType name="namedType">
        <choice minOccurs="0">
            <element name="type" type="asnx:type"/>
        </choice>
        <attribute name="name" type="NCName"/>
        <attribute name="type" type="Name"/><!-- should be type="asnx:type" -->
    </complexType>

    <complexType name="container">
        <choice maxOccurs="unbounded">
            <element name="element" type="asnx:element"/>
            <element name="optional" type="asnx:container"/>
        </choice>
    </complexType>

    <complexType name="element">
        <choice minOccurs="0">
            <element name="type" type="asnx:type"></element>
        </choice>
        <attribute name="name" type="NCName"/>
        <attribute name="type" type="Name"/><!-- should be type="asnx:type" -->
        <attribute ref="ethereum:type"/>
        <attribute ref="ethereum:indexed"/>
    </complexType>

    <simpleType name="builtin-type">
        <restriction base="string">
            <!-- built-in simple types -->
            <enumeration value="asnx:BOOLEAN"/>
            <enumeration value="asnx:INTEGER"/>
            <enumeration value="asnx:BIT-STRING"/>
            <enumeration value="asnx:OCTET-STRING"/>
            <enumeration value="asnx:NULL"/>
            <enumeration value="asnx:OBJECT-IDENTIFIER"/>
            <enumeration value="asnx:REAL"/>
            <!-- useful types -->
            <enumeration value="asnx:UTCTime"/>
            <enumeration value="asnx:UTF8String"/>
        </restriction>
    </simpleType>

    <complexType name="type">
        <choice>
            <element name="sequence" type="asnx:container"/>
            <element name="setOf" type="asnx:container"/>
            <element name="tagged">
                <complexType>
                    <attribute name="number" type="integer"/>
                    <attribute name="type" type="Name"/>
                    <attribute name="tagging" type="string"/>
                </complexType>
            </element>
            <element ref="asnx:enumerated"/>
        </choice>
    </complexType>

    <element name="enumerated">
        <complexType>
            <sequence>
                <element ref="asnx:enumeration"/>
            </sequence>
        </complexType>
    </element>

    <element name="enumeration">
        <complexType>
            <attribute name="name" type="NCName"/>
            <attribute name="number" type="integer"/>
        </complexType>
    </element>
</schema>
